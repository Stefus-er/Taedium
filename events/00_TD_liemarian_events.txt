namespace = liemarian
# The liemarian Reformation
country_event = {
	id = liemarian.1
	title = liemarian.1.t
	desc = liemarian.1.desc
	picture = {	
		trigger = {
			has_dlc = "Emperor"
		}
		picture = LUTHER_eventPicture
	}
	picture = {	
		trigger = {
			NOT = { has_dlc = "Emperor" }
		}
		picture = RELIGION_eventPicture
	}
	
	major = yes
	
	trigger = {
		is_year = 1500
		NOT = { is_religion_enabled = liemarian }
		religion = sigilian
		is_defender_of_faith = no	
		is_emperor = no
		is_elector = no
		capital_scope = {
			continent = taedium
		}
		any_owned_province = {
			can_have_center_of_reformation_trigger = {
				RELIGION = liemarian
			}
		}
	}
	
	mean_time_to_happen = {
		months = 6000

		modifier = {
			factor = 0.75
			NOT = { num_of_cities = 10 }
		}
		modifier = {
			factor = 0.75
			NOT = { num_of_cities = 2 }
		}
		
		modifier = {
			factor = 0.75
			has_idea_group = innovativeness_ideas
		}
		modifier = {
			factor = 1.25
			has_idea_group = religious_ideas
		}		
		modifier = {
			factor = 2.0
			government = theocracy
		}

		modifier = {
			factor = 0.75
			NOT = { piety = 0 }
		}
		modifier = {
			factor = 0.75
			NOT = { piety = -0.25 }
		}
		modifier = {
			factor = 0.75
			NOT = { piety = -0.5 }
		}
		modifier = {
			factor = 0.75
			NOT = { piety = -0.75 }
		}
		modifier = {
			factor = 10
			piety = 0.25
		}
		modifier = {
			factor = 10
			piety = 0.5
		}

	}

	option = {
		name = liemarian.1.a
		enable_religion = liemarian
		random_owned_province = {
			limit = {
				can_have_center_of_reformation_trigger = {
					RELIGION = liemarian
				}
			}
			change_religion = liemarian
			add_reform_center = liemarian
			add_permanent_province_modifier = {
				name = "religious_zeal_at_conv"
				duration = 9000
			}
			if = {
				limit = {
					NOT = { is_capital = yes }
				}
				root = {
					capital_scope = {
						change_religion = liemarian
						add_permanent_province_modifier = {
							name = "religious_zeal_at_conv"
							duration = 9000
						}
					}
				}
			}
		}
		set_country_flag = "liemarian_reformation" 
		hidden_effect = {
			set_global_flag = reformation_started
		}
	}
}

#Liemarian State - Episcopate
country_event = { 
	id = liemarian.2
	title = liemarian.2.t
	desc = liemarian.2.desc
	picture = DIPLOMACY_SIGNING_eventPicture

	major = yes

	mean_time_to_happen = {
		days = 21900 #60 yrs
		modifier = {
			factor = 0.25
			culture_group = liberathian_group
		}
		modifier = {
			factor = 2
			culture_group = silvestrine_group
		}
		modifier = {
			factor = 0
			is_part_of_hre = yes
		}
		modifier = {
			factor = 0.5
			has_idea_group = religious_ideas
		}
		modifier = {
			factor = 0.5
			government = theocracy
		}
		modifier = {
			factor = 0.2
			num_of_cities = 15
		}
	}

	trigger = {
		is_religion_enabled = liemarian
		NOT = { exists = PAP }
		any_owned_province = {
			is_eligible_for_episcopate = yes
		}
		religion = liemarian
		num_of_cities = 5
		is_subject = no
		NOT = { has_country_flag = rejected_episcopate_land }
	}
	immediate = {
		random_province = {
			limit = {
				is_eligible_for_episcopate = yes
			}
			save_event_target_as = episcopate_capital
			set_province_flag = episcopate_capital
		}
	}
	
	goto = episcopate_capital

	option = { #Ok
		name = liemarian.2.a
		add_prestige = 50
		random_owned_province = {
			limit = {
				has_province_flag = episcopate_capital
			}
			#province
			add_province_triggered_modifier = seat_of_episcopate
			#state
			add_core = PAP
			remove_core = ROOT
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					is_capital = no
					any_neighbor_province = {
						NOT = { owned_by = ROOT }
					}
				}
				add_core = PAP
				remove_core = ROOT
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					is_capital = no
				}
				add_core = PAP
				remove_core = ROOT
			}
			#country
			ROOT = {
				release = PAP
			}
			PAP = {
				add_government_reform = papacy_reform
				change_primary_culture = PREV
				set_capital = PREV
				adopt_reform_progress = FROM
				every_neighbor_country = {
					limit = {
						religion = liemarian
					}
					add_truce_with = PAP
				}
				add_manpower = 10
				add_treasury = 100
			}
		}
		if = {
			limit = {
				papacy_active = no
			}
			set_religion_papacy_active = {
				religion = liemarian
				active = yes
			}
		}
		ai_chance = {
			factor = 10
		}
	}
	option = { #no
		name = liemarian.2.b
		add_prestige = -25
		set_country_flag = rejected_episcopate_land
		ai_chance = {
			factor = 1
		}
	}
	option = { #Ok, transfer into pope
		name = liemarian.2.c
		add_prestige = 50
		random_owned_province = {
			limit = {
				has_province_flag = episcopate_capital
			}
			#province
			add_province_triggered_modifier = seat_of_episcopate
			#state
			add_core = PAP
			remove_core = ROOT
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					is_capital = no
					any_neighbor_province = {
						NOT = { owned_by = ROOT }
					}
				}
				add_core = PAP
				remove_core = ROOT
			}
			random_neighbor_province = {
				limit = {
					owned_by = ROOT
					is_capital = no
				}
				add_core = PAP
				remove_core = ROOT
			}
			#country
			ROOT = {
				release = PAP
			}
			PAP = {
				add_government_reform = papacy_reform
				change_primary_culture = PREV
				set_capital = PREV
				adopt_reform_progress = FROM
				every_neighbor_country = {
					limit = {
						religion = liemarian
					}
					add_truce_with = PAP
				}
				add_manpower = 10
				add_treasury = 100
			}
		}
		if = {
			limit = {
				papacy_active = no
			}
			set_religion_papacy_active = {
				religion = liemarian
				active = yes
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}

#liemarian - spread of new faith
country_event = {
	id = liemarian.3
	title = liemarian.3.t
	desc = liemarian.3.desc
	picture = STREET_SPEECH_eventPicture

	is_triggered_only = yes
	trigger = {
		religion = sigilian
	}

	option = { #that's interesting
		name = liemarian.3.a
		change_religion = liemarian
		random_owned_province = {
			limit = {
				religion = sigilian
			}
			change_religion = liemarian
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0.1
				is_part_of_hre = yes
				NOT = { emperor = { is_rival = ROOT } }
			}
			modifier = {
				factor = 5
				emperor = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 0.1
				government = theocracy
			}
			modifier = {
				factor = 0
				ruler_has_personality = zealot_personality
			}
			modifier = {
				factor = 2
				capital_scope = {
					OR = {
						region = aqerb_region
						region = argenia_region
						region = eastern_liberathia_region
						region = western_liberathia_region
					}
				}
			}
		}
	}
	option = { #this will blew over
		add_prestige = 15
		ai_chance = {
			factor = 5
		}
	}
}