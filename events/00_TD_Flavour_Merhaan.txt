namespace = merhaan


#### Church Things

## Start

country_event = { #pan-merhaan church
	id = merhaan.1
	title = merhaan.1.t
	desc = merhaan.1.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		current_age = age_of_reformation
		owns = 3185
	}
	fire_only_once = yes

	mean_time_to_happen = {
		months = 30

		modifier = {
			factor = 0.5
			is_year = 1515
		}
	}

	immediate = {
		trigger_switch = {
			on_trigger = religion
			orundes = {
				set_country_flag = orundes_religion_flag
			}
			tanagan = {
				set_country_flag = tanagan_religion_flag
			}
			navch = {
				set_country_flag = navch_religion_flag
			}
			khondii = {
				set_country_flag = khondii_religion_flag
			}
			salbar = {
				set_country_flag = salbar_religion_flag
			}
		}
	}

	option = { #convert
		name = merhaan.1.a
		change_religion = ovogsteg
		trigger_switch = {
			on_trigger = has_country_flag
			orundes_religion_flag = {
				add_harmonized_religion = orundes
			}
			tanagan_religion_flag = {
				add_harmonized_religion = tanagan
			}
			navch_religion_flag = {
				add_harmonized_religion = navch
			}
			khondii_religion_flag = {
				add_harmonized_religion = khondii
			}
			salbar_religion_flag = {
				add_harmonized_religion = salbar
			}
		}
		hidden_effect = {
			country_event = {
				id = merhaan.3
				days = 0
			}
		}
	}

	option = { #go away
		name = merhaan.1.b
		add_country_modifier = {
			name = merhaan_shaman_exodus
			duration = 912
		}
		set_country_flag = merhaan_shamans_left
		hidden_effect = {
			if = {
				limit = {
					any_neighbor_country = {
						religion_group = merhaan
						NOT = { has_country_flag = merhaan_shamans_left }
					}
				}
				random_neighbor_country = {
					country_event = {
						id = merhaan.2
						days = 365
					}
				}
			}
			else_if = {
				limit = {
					any_known_country = {
						religion_group = merhaan
						NOT = { has_country_flag = merhaan_shamans_left }
					}
				}
				random_known_country = {
					country_event = {
						id = merhaan.2
						days = 365
					}
				}
			}
		}
	}

}

country_event = { #pan-merhaan church (exodus)
	id = merhaan.2
	title = merhaan.2.t
	desc = merhaan.2.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	is_triggered_only = yes

	immediate = {
		trigger_switch = {
			on_trigger = religion
			orundes = {
				set_country_flag = orundes_religion_flag
			}
			tanagan = {
				set_country_flag = tanagan_religion_flag
			}
			navch = {
				set_country_flag = navch_religion_flag
			}
			khondii = {
				set_country_flag = khondii_religion_flag
			}
			salbar = {
				set_country_flag = salbar_religion_flag
			}
		}
	}

	option = { #convert
		name = merhaan.2.a
		change_religion = ovogsteg
		trigger_switch = {
			on_trigger = has_country_flag
			orundes_religion_flag = {
				add_harmonized_religion = orundes
			}
			tanagan_religion_flag = {
				add_harmonized_religion = tanagan
			}
			navch_religion_flag = {
				add_harmonized_religion = navch
			}
			khondii_religion_flag = {
				add_harmonized_religion = khondii
			}
			salbar_religion_flag = {
				add_harmonized_religion = salbar
			}
		}
		add_country_modifier = {
			name = merhaan_shaman_influx
			duration = 912
		}
		hidden_effect = {
			country_event = {
				id = merhaan.3
				days = 0
			}
		}
	}

	option = { #go away
		name = merhaan.2.b
		add_country_modifier = {
			name = merhaan_shaman_exodus
			duration = 912
		}
		set_country_flag = merhaan_shamans_left
		hidden_effect = {
			if = {
				limit = {
					any_neighbor_country = {
						religion_group = merhaan
						NOT = { has_country_flag = merhaan_shamans_left }
					}
				}
				random_neighbor_country = {
					country_event = {
						id = merhaan.2
						days = 365
					}
				}
			}
			else_if = {
				limit = {
					any_known_country = {
						religion_group = merhaan
						NOT = { has_country_flag = merhaan_shamans_left }
					}
				}
				random_known_country = {
					country_event = {
						id = merhaan.2
						days = 365
					}
				}
			}
		}
	}

}

country_event = { #pan-merhaan church introduction
	id = merhaan.3
	title = merhaan.3.t
	desc = merhaan.3.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	is_triggered_only = yes

	option = { #kay
		name = merhaan.3.a
		add_country_modifier = {
			name = merhaan_starting_enthusiasm
			duration = 18250
		}
		set_country_flag = first_ovogsteg_nation
	}


}

## Church success

country_event = { #pan-merhaan church solidified
	id = merhaan.4
	title = merhaan.4.t
	desc = merhaan.4.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		calc_true_if = {
			has_harmonized_with = orundes
			has_harmonized_with = tanagan
			has_harmonized_with = navch
			has_harmonized_with = khondii
			has_harmonized_with = salbar
			amount = 3
		}
		has_country_flag = first_ovogsteg_nation
	}

	immediate = {
		clr_country_flag = first_ovogsteg_nation
	}

	option = { #winning
		name = merhaan.4.a
	}


}

country_event = { #pan-merhaan church collapse
	id = merhaan.5
	title = merhaan.5.t
	desc = merhaan.5.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		had_country_flag = {
			flag = first_ovogsteg_nation
			days = 18250
		}
	}

	immediate = {
		clr_country_flag = first_ovogsteg_nation
	}

	option = { #losin
		name = merhaan.5.a
		add_country_modifier = {
			name = merhaan_church_collapsed
			duration = 0
		}
	}


}

country_event = { #pan-merhaan church solidified after collapse
	id = merhaan.6
	title = merhaan.6.t
	desc = merhaan.6.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		has_harmonized_with = orundes
		has_harmonized_with = tanagan
		has_harmonized_with = navch
		has_harmonized_with = khondii
		has_harmonized_with = salbar
		has_country_modifier = merhaan_church_collapsed
	}

	option = { #winning after losin
		name = merhaan.6.a
		remove_country_modifier = merhaan_church_collapsed
	}


}

## harmonisation change

country_event = { #not solidified church tries to harmonise other religion group
	id = merhaan.7
	title = merhaan.7.t
	desc = merhaan.7.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		has_country_flag = first_ovogsteg_nation
		NOT = { has_country_modifier = merhaan_disunified_efforts }
		OR = {
			is_harmonizing_with = saelian
			is_harmonizing_with = yermic
			is_harmonizing_with = samadio_taedian
			is_harmonizing_with = anhativaz
			is_harmonizing_with = hestani
			is_harmonizing_with = samadian
			is_harmonizing_with = wasichantlian
			is_harmonizing_with = hengtuan
		}
	}

	immediate = {
		add_country_modifier = {
			name = merhaan_disunified_efforts
			duration = -1
		}
	}

	option = { #i understand
		name = merhaan.7.a
	}

}

country_event = { #not solidified church stopped harmonising other religion group
	id = merhaan.8
	title = merhaan.8.t
	desc = merhaan.8.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		has_country_flag = first_ovogsteg_nation
		has_country_modifier = merhaan_disunified_efforts
		NOT = {
			OR = {
				is_harmonizing_with = saelian
				is_harmonizing_with = yermic
				is_harmonizing_with = samadio_taedian
				is_harmonizing_with = anhativaz
				is_harmonizing_with = hestani
				is_harmonizing_with = samadian
				is_harmonizing_with = wasichantlian
				is_harmonizing_with = hengtuan
			}
		}
	}

	immediate = {
		remove_country_modifier = merhaan_disunified_efforts
	}

	option = { #yippie
		name = merhaan.8.a
	}


}

## dudes come in with new brand ideas

country_event = { # tanagan shamans
	id = merhaan.9
	title = merhaan.9.t
	desc = merhaan.9.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		OR = {
			AND = {
				had_country_flag = {
					flag = first_ovogsteg_nation
					days = 3650
				}
				NOT = {
					has_country_flag = merhaan_shamans_arrived
				}
			}
			had_country_flag = {
				flag = merhaan_shamans_arrived
				days = 3650
			}
		}
		NOT = {
			any_owned_province = {
				religion = tanagan
			}
		}
		NOT = {
			has_country_flag = merhaan_tanagan_shamans_event
		}
	}

	immediate = {
		if = {
			limit = {
					has_country_flag = merhaan_shamans_arrived
			}
			clr_country_flag = merhaan_shamans_arrived
			set_country_flag = merhaan_shamans_arrived
		}
		else = {
			set_country_flag = merhaan_shamans_arrived		
		}
		set_country_flag = merhaan_tanagan_shamans_event
	}

	option = { # come in
		name = merhaan.9.a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			change_religion = tanagan
			every_neighbor_province = {
				limit = {
					is_capital = no
				}
				random_list = {
					1 = {
						change_religion = tanagan
					}
					2 = {}
				}
			}
		}
	}

	option = { ## nuh uh
		name = merhaan.9.b
	}


}

country_event = { # orundes shamans
	id = merhaan.10
	title = merhaan.10.t
	desc = merhaan.10.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		OR = {
			AND = {
				had_country_flag = {
					flag = first_ovogsteg_nation
					days = 3650
				}
				NOT = {
					has_country_flag = merhaan_shamans_arrived
				}
			}
			had_country_flag = {
				flag = merhaan_shamans_arrived
				days = 3650
			}
		}
		NOT = {
			any_owned_province = {
				religion = orundes
			}
		}
		NOT = {
			has_country_flag = merhaan_orundes_shamans_event
		}
	}

	immediate = {
		if = {
			limit = {
					has_country_flag = merhaan_shamans_arrived
			}
			clr_country_flag = merhaan_shamans_arrived
			set_country_flag = merhaan_shamans_arrived
		}
		else = {
			set_country_flag = merhaan_shamans_arrived		
		}
		set_country_flag = merhaan_orundes_shamans_event
	}

	option = { #yippie
		name = merhaan.10.a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			change_religion = orundes
			every_neighbor_province = {
				limit = {
					is_capital = no
				}
				random_list = {
					1 = {
						change_religion = orundes
					}
					2 = {}
				}
			}
		}
	}

	option = { ## nuh uh
		name = merhaan.10.b
	}


}

country_event = { # navch shamans
	id = merhaan.11
	title = merhaan.11.t
	desc = merhaan.11.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		OR = {
			AND = {
				had_country_flag = {
					flag = first_ovogsteg_nation
					days = 3650
				}
				NOT = {
					has_country_flag = merhaan_shamans_arrived
				}
			}
			had_country_flag = {
				flag = merhaan_shamans_arrived
				days = 3650
			}
		}
		NOT = {
			any_owned_province = {
				religion = navch
			}
		}
		NOT = {
			has_country_flag = merhaan_navch_shamans_event
		}
	}

	immediate = {
		if = {
			limit = {
					has_country_flag = merhaan_shamans_arrived
			}
			clr_country_flag = merhaan_shamans_arrived
			set_country_flag = merhaan_shamans_arrived
		}
		else = {
			set_country_flag = merhaan_shamans_arrived		
		}
		set_country_flag = merhaan_navch_shamans_event
	}

	option = { #yippie
		name = merhaan.11.a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			change_religion = navch
			every_neighbor_province = {
				limit = {
					is_capital = no
				}
				random_list = {
					1 = {
						change_religion = navch
					}
					2 = {}
				}
			}
		}
	}

	option = { ## nuh uh
		name = merhaan.11.b
	}


}

country_event = { # khondii shamans
	id = merhaan.12
	title = merhaan.12.t
	desc = merhaan.12.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		OR = {
			AND = {
				had_country_flag = {
					flag = first_ovogsteg_nation
					days = 3650
				}
				NOT = {
					has_country_flag = merhaan_shamans_arrived
				}
			}
			had_country_flag = {
				flag = merhaan_shamans_arrived
				days = 3650
			}
		}
		NOT = {
			any_owned_province = {
				religion = khondii
			}
		}
		NOT = {
			has_country_flag = merhaan_khondii_shamans_event
		}
	}

	immediate = {
		if = {
			limit = {
					has_country_flag = merhaan_shamans_arrived
			}
			clr_country_flag = merhaan_shamans_arrived
			set_country_flag = merhaan_shamans_arrived
		}
		else = {
			set_country_flag = merhaan_shamans_arrived		
		}
		set_country_flag = merhaan_khondii_shamans_event
	}

	option = { #yippie
		name = merhaan.12.a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			change_religion = khondii
			every_neighbor_province = {
				limit = {
					is_capital = no
				}
				random_list = {
					1 = {
						change_religion = khondii
					}
					2 = {}
				}
			}
		}
	}

	option = { ## nuh uh
		name = merhaan.12.b
	}


}

country_event = { # salbar shamans
	id = merhaan.13
	title = merhaan.13.t
	desc = merhaan.13.desc

	picture = RELIGIOUS_MIGRANTS_eventPicture

	trigger = {
		OR = {
			AND = {
				had_country_flag = {
					flag = first_ovogsteg_nation
					days = 3650
				}
				NOT = {
					has_country_flag = merhaan_shamans_arrived
				}
			}
			had_country_flag = {
				flag = merhaan_shamans_arrived
				days = 3650
			}
		}
		NOT = {
			any_owned_province = {
				religion = salbar
			}
		}
		NOT = {
			has_country_flag = merhaan_salbar_shamans_event
		}
	}

	immediate = {
		if = {
			limit = {
					has_country_flag = merhaan_shamans_arrived
			}
			clr_country_flag = merhaan_shamans_arrived
			set_country_flag = merhaan_shamans_arrived
		}
		else = {
			set_country_flag = merhaan_shamans_arrived		
		}
		set_country_flag = merhaan_salbar_shamans_event
	}

	option = { #yippie
		name = merhaan.13.a
		random_owned_province = {
			limit = {
				is_capital = no
			}
			change_religion = salbar
			every_neighbor_province = {
				limit = {
					is_capital = no
				}
				random_list = {
					1 = {
						change_religion = salbar
					}
					2 = {}
				}
			}
		}
	}

	option = { ## nuh uh
		name = merhaan.13.b
	}


}