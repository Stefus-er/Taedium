namespace = snaiwatz

country_event = { #I'M A SILESIAN AND I'M MINING THE COAL, DIGGY DIGGY COAL
	id = snaiwatz.1
	title = snaiwatz.1.t
	desc = snaiwatz.1.desc
	picture = INDUSTRIALIZATION_eventPicture

	fire_only_once = yes

	
	trigger = {
		primary_culture = snaiwatzer
		OR = {
			652 = {
				owned_by = ROOT
				development = 45
			}
			501 = {
				owned_by = ROOT
				development = 45
			}
		}
	}

	option = {
		name = snaiwatz.1.a
		if = {
			limit = {
				652 = {
					owned_by = ROOT
				}
			}
			652 = { change_trade_goods = coal }
		}
		if = {
			limit = {
				501 = {
					owned_by = ROOT
				}
			}
			501 = { change_trade_goods = coal }
		}
		ai_chance = {
			factor = 5
		}
	}

}

country_event = { #Elender Coup
	id = snaiwatz.2
	title = snaiwatz.2.t
	desc = snaiwatz.2.desc
	picture = REVOLT_HUNGARIAN_eventPicture

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = ELENDERS_BORN
		hidden_effect = {
			every_country = {
				limit = {
					have_had_reform = snaiwatzer_princedom
					NOT = {
						tag = ELC
					}
				}
				add_government_reform = snaiwatzer_monarchy
			}
		}
	}

	option = {
		name = snaiwatz.2.a
		on_change_tag_effect = yes
		change_tag = ELC
		swap_free_idea_group = yes #No Choice, you're forced with Elender Ideas
		change_government = republic
		add_government_reform = confederation_of_the_wretched_reform
		add_country_modifier = {
			name = TD_Rise_of_Elenders
			duration = -1
		}
		define_ruler = {
			name = "Friedrich Kitzhen"
			adm = 4
			dip = 2
			mil = 6
			age = 36
			claim = 95
		}
		add_ruler_personality = inspiring_leader_personality
		add_ruler_personality = strict_personality
		define_ruler_to_general = {
			fire = 6
			shock = 6
			manuever = 5
			siege = 3
			trait = master_of_arms_personality
		}
		add_army_professionalism = 0.4
		give_estate_land_share_gigantic = { estate = all } #10
		give_estate_land_share_gigantic = { estate = estate_peasants } #20
		give_estate_land_share_gigantic = { estate = estate_peasants } #30
		hidden_effect = {
			capital_scope = {
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				infantry = ELC
				artillery = ELC
				artillery = ELC
			}
		}
		if = {
			limit = {
				any_neighbor_country = {
					primary_culture = snaiwatzer
					is_part_of_hre = yes
				}
			}
			random_neighbor_country = {
				limit = {
					primary_culture = snaiwatzer
					is_part_of_hre = yes
				}
				save_global_event_target_as = target_of_1st_snaiwatzer_war
				ELC = {
					declare_war_with_cb = {
						casus_belli = cb_1st_snaiwatzer_war
						who = PREV
					}
				}
			}
		}
		else = {
			random_neighbor_country = {
				limit = {
					is_part_of_hre = yes
				}
				save_global_event_target_as = target_of_1st_snaiwatzer_war
				ELC = {
					declare_war_with_cb = {
						casus_belli = cb_1st_snaiwatzer_war
						who = PREV
					}
				}
			}
		}
		ai_chance = {
			factor = 5
		}
	}

}

country_event = { #Elenders Rise Up
	id = snaiwatz.3
	title = snaiwatz.3.t
	desc = snaiwatz.3.desc
	picture = REVOLT_HUNGARIAN_eventPicture

	fire_only_once = yes

	is_triggered_only = yes
	immediate = {
		set_global_flag = ELENDERS_BORN
		hidden_effect = {
			save_global_event_target_as = target_of_1st_snaiwatzer_war
			every_country = {
				limit = {
					have_had_reform = snaiwatzer_princedom
					NOT = {
						tag = ELC
					}
				}
				add_government_reform = snaiwatzer_monarchy
			}
			random_owned_province = {
				limit = {
					is_capital = no
				}
				add_core = ELC
				random_neighbor_province = {
					limit = {
						is_capital = no
						owned_by = ROOT
					}
					add_core = ELC
				}
				random_neighbor_province = {
					limit = {
						is_capital = no
						owned_by = ROOT
					}
					add_core = ELC
				}
			}
			release = ELC
			ELC = {
				adopt_reform_progress = ROOT
				add_army_professionalism = 0.4
				add_manpower = 10
				add_treasury = 100
				add_adm_power = 200
				add_dip_power = 200
				add_mil_power = 200
				add_country_modifier = {
					name = TD_Rise_of_Elenders
					duration = -1
				}
				add_government_reform = confederation_of_the_wretched_reform
				define_ruler = {
					name = "Friedrich Kitzhen"
					adm = 4
					dip = 2
					mil = 6
					age = 36
					claim = 95
				}
				add_ruler_personality = inspiring_leader_personality
				add_ruler_personality = strict_personality
				define_ruler_to_general = {
					fire = 6
					shock = 6
					manuever = 5
					siege = 3
					trait = master_of_arms_personality
				}
				declare_war_with_cb = {
					casus_belli = cb_1st_snaiwatzer_war
					who = ROOT
				}
				hidden_effect = {
					capital_scope = {
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						infantry = ELC
						artillery = ELC
						artillery = ELC
					}
				}
			}
		}
	}

	option = {
		name = snaiwatz.3.a
		tooltip = {
			ELC = {
				declare_war_with_cb = {
					casus_belli = cb_1st_snaiwatzer_war
					who = ROOT
				}
			}
		}
		ai_chance = {
			factor = 5
		}
	}

	option = {
		name = snaiwatz.3.b
		tooltip = {
			ELC = {
				declare_war_with_cb = {
					casus_belli = cb_1st_snaiwatzer_war
					who = ROOT
				}
			}
		}
		switch_tag = ELC
		ai_chance = {
			factor = 5
		}
	}
}

country_event = { #1st Snaiwatzer War
	id = snaiwatz.4
	title = snaiwatz.4.t
	desc = snaiwatz.4.desc
	picture = WHITE_MOUNTAIN_eventPicture

	#fire_only_once = yes

	trigger = {
		has_global_flag = ELENDERS_BORN
		primary_culture = snaiwatzer
		has_government_mechanic = snaiwatzer_army_loyalty_mechanic
		NOT = {
			war_with = ELC
		}
		NOT = {
			tag = ELC
		}
		NOT = {
			has_country_flag = td_had_snaiwatzer_war_event
		}
		NOT = {
			has_global_flag = ELENDERS_DEFEATED
		}
		NOT = {
			has_global_flag = ELENDERS_WON_1ST_WAR #If you manage to avoid this event for the whole duration of the 1st war, congratulations, although i have no idea how you managed to do this.
		}
	}
	mean_time_to_happen = {
		days = 60
	}
	immediate = {
		hidden_effect = {
			set_country_flag = td_had_snaiwatzer_war_event
		}
	}

	option = {
		name = snaiwatz.4.a
		if = {
			limit = {
				ai = no
				ELC = {
					ai = yes
				}
			}
			switch_tag = ELC
		} #If you really wanted to play Elenders but hadn't luck of firing them, here's to you.
		every_owned_province = {
			add_core = ELC
			cede_province = ELC
		}
		ai_chance = {
			factor = 5
			modifier = {
				factor = 0
				tag = MUR #Lore Reasons
			}
			modifier = {
				factor = 0.2
				total_development = 40
			}
		}
	}

	option = {
		name = snaiwatz.4.b
		join_all_defensive_wars_of = event_target:target_of_1st_snaiwatzer_war
		create_alliance = event_target:target_of_1st_snaiwatzer_war
		set_country_flag = joined_pikemens_league
		ai_chance = {
			factor = 5
			modifier = {
				factor = 10
				tag = GRB #To Balance out the Elender Odds
			}
		}
	}
}

country_event = { #End of Elender Confederation
	id = snaiwatz.5
	title = snaiwatz.5.t
	desc = snaiwatz.5.desc
	picture = WHITE_MOUNTAIN_eventPicture

	fire_only_once = yes

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = ELENDERS_DEFEATED
			ELC = {
				release_all_possible_countries = yes
				random_neighbor_country = {
					limit = {
						OR = {
							alliance_with = event_target:target_of_1st_snaiwatzer_war
							tag = event_target:target_of_1st_snaiwatzer_war
						}
					}
					ELC = {
						capital_scope = {
							cede_province = PREV
							remove_core = ELC
						}
					}
				}
				#Fallback
				every_owned_province = {
					remove_core = ELC
					add_core = event_target:target_of_1st_snaiwatzer_war
					cede_province = event_target:target_of_1st_snaiwatzer_war
				}
			}
		}
	}

	option = {
		name = snaiwatz.5.a
		custom_tooltip = TD_Dismantle_Elenders_tt
		ai_chance = {
			factor = 5
		}
	}
}

country_event = { #Elenders Victorius - 1st War Edition
	id = snaiwatz.6
	title = snaiwatz.6.t
	desc = snaiwatz.6.desc
	picture = SCOTTISH_MERCENARIES_eventPicture

	fire_only_once = yes

	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			set_global_flag = ELENDERS_WON_1ST_WAR
			event_target:target_of_1st_snaiwatzer_war = {
				every_owned_province = {
					cede_province = ELC
					add_core = ELC
				}
				every_country = {
					limit = {
						has_country_flag = joined_pikemens_league
					}
					every_owned_province = {
						cede_province = ELC
					}
				}
			}
			
		}
	}

	option = {
		name = snaiwatz.6.a
		custom_tooltip = TD_Win_1st_snaiwatzer_war_tt
		ai_chance = {
			factor = 5
		}
	}
}

country_event = { #Golden age of mercenaries
	id = snaiwatz.100
	title = snaiwatz.100.t
	desc = snaiwatz.100.desc
	picture = ARMY_WITH_MONASTERY_eventPicture
	
	is_triggered_only = yes
	trigger = {
		has_government_mechanic = snaiwatzer_army_loyalty_mechanic
		current_age = age_of_discovery
	}

	option = {
		name = snaiwatz.100.a
		add_country_modifier = {
			name = TD_Golden_Age_Of_Mercenaries
			duration = -1
			desc = until_end_of_age_desc
		}
		ai_chance = {
			factor = 100
		}
	}
}

country_event = { #Habichtenberg Palace
	id = snaiwatz.101
	title = snaiwatz.101.t
	desc = snaiwatz.101.desc
	picture = CASTLE_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		months = 120
	}
	trigger = {
		OR = {
			current_age = age_of_absolutism
			current_age = age_of_revolutions
		}
		625 = {
			is_state_core = ROOT
			AND = {
				culture = snaiwatzer
				province_is_or_accepts_culture = yes
			}
		}
	}

	option = {
		name = snaiwatz.101.a
		custom_tooltip = unlock_habichtenberg_palace_upgrade_tt
		hidden_effect = {
			set_global_flag = built_habichtenberg_palace_global_flag
		}
		add_prestige = 25
		add_splendor = 300
		ai_chance = {
			factor = 100
		}
	}
}

country_event = { #Maximilian Frederick von Rehden
	id = snaiwatz.102
	title = snaiwatz.102.t
	desc = snaiwatz.102.desc
	picture = ADVISOR_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		months = 120
	}
	trigger = {
		primary_culture = snaiwatzer
		NOT = {
			current_age = age_of_discovery
		}
	}

	option = {
		name = snaiwatz.102.a
		define_advisor = {
			type = fortification_expert
			age = 35
			cost_multiplier = 0.5
			location = 566
			skill = 2
			name = "Maximilian Frederick von Rehden"
		}
		add_mil_power = 50
		add_army_tradition = 20
		ai_chance = {
			factor = 100
		}
	}
}

country_event = { #Reconstructing Old Eniver Limstadt-Camaria Road
	id = snaiwatz.103
	title = snaiwatz.103.t
	desc = snaiwatz.103.desc
	picture = ROYAL_SOCIETY_eventPicture

	fire_only_once = yes

	mean_time_to_happen = {
		months = 120
	}
	trigger = {
		owns_core_province = 857 #Grottinio
		owns_core_province = 501 #Bleiburg
		owns_core_province = 623 #Grobhalde
		OR = {
			owns_core_province = 547 #Schelazheim
			owns_core_province = 566 #Adrianburg
			owns_core_province = 625 #Vizam
		}
		owns_core_province = 551 #Muros
		owns_core_province = 561 #Lichtung
	}

	option = {
		name = snaiwatz.103.a
		857 = {
			add_province_modifier = {
				name = TD_Snaiwatz_reconstructing_limstadt_route
				duration = -1
			}
		}
		501 = {
			add_province_modifier = {
				name = TD_Snaiwatz_reconstructing_limstadt_route
				duration = -1
			}
		}
		623 = {
			add_province_modifier = {
				name = TD_Snaiwatz_reconstructing_limstadt_route
				duration = -1
			}
		}
		551 = {
			add_province_modifier = {
				name = TD_Snaiwatz_reconstructing_limstadt_route
				duration = -1
			}
		}
		561 = {
			add_province_modifier = {
				name = TD_Snaiwatz_reconstructing_limstadt_route
				duration = -1
			}
		}
		if = {
			limit = {
				566 = {
					owned_by = ROOT
				}
			}
			566 = {
				add_province_modifier = {
					name = TD_Snaiwatz_reconstructing_limstadt_route
					duration = -1
				}
			}
		}
		if = {
			limit = {
				625 = {
					owned_by = ROOT
				}
			}
			625 = {
				add_province_modifier = {
					name = TD_Snaiwatz_reconstructing_limstadt_route
					duration = -1
				}
			}
		}
		if = {
			limit = {
				547 = {
					owned_by = ROOT
				}
			}
			547 = {
				add_province_modifier = {
					name = TD_Snaiwatz_reconstructing_limstadt_route
					duration = -1
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
}

country_event = { #Freedom of Adrianburg Privilege (Free Cities Edition)
	id = snaiwatz.104
	title = snaiwatz.104.t
	desc = snaiwatz.104.desc
	picture = MERCHANTS_TALKING_eventPicture

	is_triggered_only = yes

	trigger = {
		primary_culture = snaiwatzer
		has_reform = free_city
	}

	option = {
		name = snaiwatz.104.a
		add_years_of_income = 2
		add_adm_power = 50
		add_dip_power = 50
		emperor = {
			add_imperial_influence = 2
		}
		ai_chance = {
			factor = 100
		}
	}
}

country_event = { #Freedom of Adrianburg Privilege (Free Cities Edition)
	id = snaiwatz.105
	title = snaiwatz.104.t
	desc = snaiwatz.105.desc
	picture = MERCHANTS_TALKING_eventPicture

	is_triggered_only = yes

	trigger = {
		primary_culture = snaiwatzer
		NOT = { has_reform = free_city }
	}

	option = {
		name = snaiwatz.105.a
		add_years_of_income = 0.5
		random_owned_province = {
			limit = {
				local_autonomy = 25
			}
			add_local_autonomy = -25
		}
		add_mil_power = 25
		ai_chance = {
			factor = 100
		}
	}
}