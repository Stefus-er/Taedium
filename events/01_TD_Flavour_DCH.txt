namespace = dorchia

country_event = {
	id = dorchia.1
	title = dorchia.1.t
	desc = dorchia.1.desc
	picture = TD_DCH_eventPicture

	is_triggered_only = yes

	option = {
		name = dorchia.1.a
		add_prestige = 5
	}
	option = {
		name = dorchia.1.b
		override_country_name = DCH_dhorchatir
	}
	option = {
		trigger = {
			religion = wirosepan
		}
		name = dorchia.1.c
		override_country_name = DCH_saleriochta
		ai_chance = {
			factor = 0
		}
	}
}

province_event = { #Arei rebellion
	id = dorchia.2
	title = dorchia.2.t
	desc = dorchia.2.desc
	picture = RUNESTONE_eventPicture

	fire_only_once = yes

	trigger = {
		province_id = 803
		religion = wirosepan
		has_missionary = yes
		is_year = 1450
		NOT = { is_religion_enabled = liemarian }
	}
	mean_time_to_happen = {
		months = 36
	}

	option = {
		name = dorchia.2.a
		spawn_rebels = {
			size = 3
			type = wirosepan_rebels
			unrest = 5
			separatists_target = ARE
			leader = "Macdara ó Arei"
		}
	}
	option = {
		name = dorchia.2.b
		owner = {
			add_prestige = -5
		}
		add_local_autonomy = 50
		add_province_modifier = {
			name = arei_autonomy_mod
			duration = 14600 #40yrs
		}
	}
}

country_event = { #Séaghdhe ó Caoimh
	id = dorchia.3
	title = dorchia.3.t
	desc = dorchia.3.desc
	picture = ADVISOR_eventPicture

	fire_only_once = yes
	trigger = {
		tag = DCH
		is_state_core = 830
		has_idea_group = exploration_ideas
	}
	mean_time_to_happen = {
		months = 360
	}
	option = {
		name = dorchia.3.a
		define_explorer = {
			shock = 2
			fire = 3
			manuever = 5
			siege = 1
			name = "Séaghdhe ó Caoimh"
		}
		hidden_effect = {
			set_country_flag = caoimhia_flag
		}
	}
	option = {
		name = dorchia.3.b
		define_advisor = {
			type = navigator
			skill = 3
			cost_multiplier = 0.5
			name = "Séaghdhe ó Caoimh"
			location = 830
		}
	}
}

country_event = { #ehren arms dealers
	id = dorchia.4
	title = dorchia.4.t
	desc = dorchia.4.desc
	picture = CORRUPTION_eventPicture

	trigger = {
		has_estate_privilege = estate_burghers_ehren_settlers
		is_at_war = yes
		NOT = { war_with = EHR }
		NOT = { war_with = ZIL }
		NOT = { has_country_flag = rejected_ehren_arms_flag }
		NOT = { has_country_modifier = ehren_steel_mod }
	}
	mean_time_to_happen = {
		months = 12
		modifier = {
			factor = 0.5
			reverse_has_opinion = {
				who = EHR
				value = 100
			}
		}
	}

	option = {
		name = dorchia.4.a
		add_years_of_income = -0.25
		add_mercantilism = -2
		add_country_modifier = {
			name = ehren_steel_mod
			duration = 3650
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 2
				ruler_has_personality = drunkard_personality
			}
		}
	}
	option = {
		name = dorchia.4.b
		add_mercantilism = 2
		custom_tooltip = dorchia.4.b_tt
		hidden_effect = {
			set_country_flag = rejected_ehren_arms_flag
		}
	}
	option = {
		name = dorchia.4.c
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = entrepreneur_personality
				reverse_has_opinion = {
					who = EHR
					value = 100
				}
			}
		}
		add_years_of_income = -0.1
		add_country_modifier = {
			name = ehren_steel_mod
			duration = 3650
		}
		
	}
}

country_event = { #tiarnai demands
	id = dorchia.5
	title = dorchia.5.t
	desc = dorchia.5.desc
	picture = COURT_eventPicture

	trigger = {
		culture_group = dorchean_labosian_group
		has_reform = dorchean_realm
		has_estate = estate_nobles
	}

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			add_country_modifier = {
				name = tiarnai_adbar_timer
				duration = 9125 #25yrs
				hidden = yes
			}
			random_list = {
				1 = {
					set_country_flag = tiarnai_demand_1
				}
				1 = {
					set_country_flag = tiarnai_demand_2
				}
				1 = {
					set_country_flag = tiarnai_demand_3
				}
				1 = {
					set_country_flag = tiarnai_demand_4
				}
				1 = {
					set_country_flag = tiarnai_demand_5
				}
				1 = {
					set_country_flag = tiarnai_demand_6
				}
			}
		}
	}
	after = {
		clr_country_flag = tiarnai_demand_1
		clr_country_flag = tiarnai_demand_2
		clr_country_flag = tiarnai_demand_3
		clr_country_flag = tiarnai_demand_4
		clr_country_flag = tiarnai_demand_5
		clr_country_flag = tiarnai_demand_6
	}

	option = {
		name = dorchia.5.a
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = dorchia_tiarnai_adbar
			duration = 7300
			influence = 15
			short = yes
		}

		trigger_switch = {
			on_trigger = has_country_flag
			tiarnai_demand_1 = {
				add_years_of_income = -0.5
			}
			tiarnai_demand_2 = {
				add_army_tradition = -10
			}
			tiarnai_demand_3 = {
				add_adm_power = -25
			}
			tiarnai_demand_4 = {
				add_dip_power = -25
			}
			tiarnai_demand_5 = {
				add_mil_power = -25
			}
			tiarnai_demand_6 = {
				add_yearly_manpower = -0.5
			}
		}
	}
	option = {
		name = dorchia.5.b
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -30
		}
	}
	option = {
		name = dorchia.5.c
		trigger = {
			ruler_has_personality = silver_tongue_personality
		}
		highlight = yes
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = dorchia_tiarnai_adbar
			duration = 7300
			influence = 10
			short = yes
		}
	}
}

country_event = {
	id = dorchia.6
	title = dorchia.6.t
	desc = dorchia.6.desc
	picture = LAND_MILITARY_eventPicture

	fire_only_once = yes

	trigger = {
		tag = DCH
		mil_tech = 14
	}
	mean_time_to_happen = {
		months = 360
		modifier = {
			factor = 0.5
			army_professionalism = 0.1
		}
		modifier = {
			factor = 0.5
			army_professionalism = 0.2
		}
	}
	immediate = {
		hidden_effect = {
			1698 = {
				save_event_target_as = 1968_name #loc
			}
		}
	}

	option = {
		name = dorchia.6.a
		define_advisor = {
			type = army_reformer
			cost_multiplier = 0.75
			skill = 3
			name = "Alwin of Lotveld"
			culture = achtveldi
		}
		add_army_professionalism = 0.03
	}
	option = {
		name = dorchia.6.b
		if = {
			limit = { reform_level = 5 }
			add_government_reform = lotveldian_tactics_reform
		} else = {
			change_government_reform_progress = 100
		}
		define_advisor = {
			type = army_reformer
			cost_multiplier = 0.75
			skill = 3
			name = "Alwin of Lotveld"
			culture = achtveldi
			religion = 1698
		}
		add_army_professionalism = 0.08
		add_army_tradition = -20
	}
}

country_event = { #clan of ó Odhrán
	id = dorchia.7
	title = dorchia.7.t
	desc = dorchia.7.desc
	picture = TD_cityguy_eventPicture

	fire_only_once = yes
	
	trigger = {
		tag = DCH
		has_institution = manufactories	
		800 = {
			is_state_core = ROOT
			culture_group = dorchean_labosian_group
		}
	}

	option = {
		name = dorchia.7.a
		add_innovativeness_small_effect = yes
		800 = {
			rename_capital = "Odhrántagh"
			change_trade_goods = cloth
			if = {
				limit = { has_manufactory_trigger = yes }
				add_base_production = 3
			} else = {
				add_base_production = 2
			}
			add_building = textile
		}
	}
	option = {
		name = dorchia.7.b
		trigger = {
			any_subject_country = {
				is_colonial_nation = yes
			}
		}
		highlight = yes
		random_subject_country = {
			limit = {
				is_colonial_nation = yes
			}
			random_owned_province = {
				add_base_production = 2
			}
			random_owned_province = {
				add_base_production = 2
			}
			random_owned_province = {
				add_base_production = 2
			}
		}
		add_absolutism = 10
		
	}
}

country_event = {
	id = dorchia.8
	title = dorchia.8.t
	desc = dorchia.8.desc
	picture = wihgfx_FEMALES_eventPicture

	fire_only_once = yes

	trigger = {
		tag = DCH
		has_heir = no
		has_reform = dorchean_realm
		is_year = 1480
	}

	option = {
		name = dorchia.8.a
		define_heir = {
			name = "Eithne"
			dynasty = ROOT
			adm = 5
			dip = 6
			mil = 4
			claim = 35
			age = 19
			female = yes
			no_consort_with_heir = yes
		}
		add_heir_personality = expansionist_personality
	}
	option = {
		name = dorchia.8.b
		add_legitimacy = 10
		define_advisor = {
			type = treasurer
			female = yes
			age = 19
			name = "Eithne of Ainil"
			cost_multiplier = 0.75
			skill = 3
		}

	}
} 

country_event = { #clash of clans
	id = dorchia.9
	title = dorchia.9.t
	desc = dorchia.9.desc
	picture = ACCUSATION_eventPicture

	is_triggered_only = yes

	trigger = {
		has_reform = dorchean_realm
		has_estate = estate_nobles
	}

	immediate = {
		random_owned_province = {
			limit = {
				culture_group = dorchean_labosian_group
			}
			save_event_target_as = clan_1_province
		}
		random_owned_province = {
			limit = {
				culture_group = dorchean_labosian_group
				NOT = { province_id = event_target:clan_1_province }
			}
			save_event_target_as = clan_2_province
		}
	}

	option = { #punish the clan 2
		name = dorchia.9.a
		goto = clan_1_province
		event_target:clan_1_province = {
			add_base_production = 1
		}
		event_target:clan_2_province = {
			add_province_modifier = {
				name = tiarnai_upset_mod
				duration = 3650
			}
		}
	}
	option = { #support clan 2
		name = dorchia.9.b
		goto = clan_2_province
		event_target:clan_2_province = {
			add_base_production = 1
		}
		event_target:clan_1_province = {
			add_province_modifier = {
				name = tiarnai_upset_mod
				duration = 3650
			}
		}
	}
	option = { #it all belongs to the crown
		name = dorchia.9.c
		add_absolutism = 5
		add_estate_loyalty = {
			estate = estate_nobles
			loyalty = -15
		}
		event_target:clan_1_province = {
			add_province_modifier = {
				name = tiarnai_upset_mod
				duration = 3650
			}
		}
		event_target:clan_2_province = {
			add_province_modifier = {
				name = tiarnai_upset_mod
				duration = 3650
			}
		}
		add_years_of_income = 1
	}
	option = { #encourage cooperation
		name = dorchia.9.d
		highlight = yes
		trigger = {
			OR = {
				ruler_has_personality = silver_tongue_personality
				ruler_has_personality = entrepreneur_personality
			}
		}
		event_target:clan_1_province = {
			add_base_production = 1
		}
		event_target:clan_2_province = {
			add_base_production = 1
		}
	}
}
country_event = { #rise of capallaire
	id = dorchia.10
	title = dorchia.10.t
	desc = dorchia.10.desc
	picture = REFORM_eventPicture

	fire_only_once = yes

	trigger = {
		tag = DCH
		has_reform = formalized_comhchoiteann_laws
		has_reform = five_lords_reform
		has_institution = printing_press
		reform_level = 5
		NOT = { has_reform = parliamentary_reform }
		NOT = { has_reform = celestial_empire }
	}
	mean_time_to_happen = {
		months = 60
	}

	option = {
		name = dorchia.10.a
		add_government_reform = dorchian_parliamentarism_reform
		capital_scope = { set_seat_in_parliament = yes }
		add_estate_loyalty = {
			estate = estate_peasants
			loyalty = 20
		}
		add_estate_loyalty = {
			estate = estate_burghers
			loyalty = 20
		}
	}
	option = {
		name = dorchia.10.b
		random_owned_province = {
			limit = {
				culture_group = dorchean_labosian_group
			}
			spawn_rebels = {
				size = 3
				type = particularist_rebels
			}
		}
		random_owned_province = {
			limit = {
				culture_group = dorchean_labosian_group
			}
			spawn_rebels = {
				size = 3
				type = particularist_rebels
			}
		}
		random_owned_province = {
			limit = {
				culture_group = dorchean_labosian_group
			}
			spawn_rebels = {
				size = 3
				type = particularist_rebels
			}
		}
	}
}
# country_event = {
# 	id = dorchia.1
# 	title = dorchia.1.t
# 	desc = dorchia.1.desc
# 	picture = TD_DCH_eventPicture

# 	option = {
# 		name = dorchia.1.a
# 	}
# 	option = {
# 		name = dorchia.1.b
# 	}
# }
# country_event = {
# 	id = dorchia.1
# 	title = dorchia.1.t
# 	desc = dorchia.1.desc
# 	picture = TD_DCH_eventPicture

# 	option = {
# 		name = dorchia.1.a
# 	}
# 	option = {
# 		name = dorchia.1.b
# 	}
# }
# country_event = {
# 	id = dorchia.1
# 	title = dorchia.1.t
# 	desc = dorchia.1.desc
# 	picture = TD_DCH_eventPicture

# 	option = {
# 		name = dorchia.1.a
# 	}
# 	option = {
# 		name = dorchia.1.b
# 	}
# }
# country_event = {
# 	id = dorchia.1
# 	title = dorchia.1.t
# 	desc = dorchia.1.desc
# 	picture = TD_DCH_eventPicture

# 	option = {
# 		name = dorchia.1.a
# 	}
# 	option = {
# 		name = dorchia.1.b
# 	}
# }