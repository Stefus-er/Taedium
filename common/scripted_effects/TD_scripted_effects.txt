born_pope = {
	event_target:episcopate_capital = {
		#province
		add_province_triggered_modifier = seat_of_episcopate
		add_base_tax = 2
		add_base_production = 2
		add_base_manpower = 2
		#state
		#add_core = PAP
		#remove_core = ROOT
		#random_neighbor_province = {
		#	limit = {
		#		owned_by = ROOT
		#		is_capital = no
		#		any_neighbor_province = {
		#			NOT = { owned_by = ROOT }
		#		}
		#	}
		#	add_core = PAP
		#	remove_core = ROOT
		#}
		every_province_in_state = { 
			add_core = PAP
			remove_core = ROOT
		}
		#country
		ROOT = {
			release = PAP
		}
		PAP = {
			hidden_effect = {
				add_government_reform = papacy_reform
				change_primary_culture = PREV
				change_religion = liemarian #fallback
				set_capital = event_target:episcopate_capital
				adopt_reform_progress = FROM
				define_ruler = {
					name = "Pious II"
					male = yes
					religion = liemarian
					age = 65
					claim = 100
				}
			}
			every_neighbor_country = {
				limit = {
					religion = liemarian
				}
				add_truce_with = PAP
			}
			add_manpower = 10
			add_treasury = 100
			add_adm_power = 200
			add_dip_power = 200
			add_mil_power = 200

		}
	}
	if = {
		limit = {
			papacy_active = no
		}
		set_religion_papacy_active = {
			religion = liemarian
			active = yes
		}
	}
}

emperor_new_towns_effect = {
	random_province = {
		limit = { 
			is_part_of_hre = yes
			NOT = { has_province_modifier = emperor_new_towns }
			NOT = { owner = { has_reform = free_city } }
		}
		add_province_modifier = {
			name = emperor_new_towns
			duration = 3650
		}
		custom_tooltip = random_dev_point_tooltip
		hidden_effect = {
			random_list = {
				1 = { add_base_tax = 1 }
				1 = { add_base_production = 1 }
				1 = { add_base_manpower = 1 }
			}
		}
		custom_tooltip = random_dev_point_tooltip
		hidden_effect = {
			random_list = {
				1 = { add_base_tax = 1 }
				1 = { add_base_production = 1 }
				1 = { add_base_manpower = 1 }
			}
		}
	}
}

fawud_custom_name_effect = {
	if = {
		limit = { was_tag = RAM }
		override_country_name = ARD_RAM
	} else_if = {
		limit = { was_tag = SAY }
		override_country_name = ARD_SAY
	} else_if = {
		limit = { was_tag = TUN }
		override_country_name = ARD_TUN
	} else_if = {
		limit = { was_tag = IMA }
		override_country_name = ARD_IMA
	} else_if = {
		limit = { was_tag = ALH }
		override_country_name = ARD_ALH
	} else_if = {
		limit = { was_tag = KUB }
		override_country_name = ARD_KUB
	} else_if = {
		limit = { was_tag = ALU }
		override_country_name = ARD_ALU
	}
}

grant_ruler_eneratian_emperorship = {
	hidden_effect = {
		save_global_event_target_as = eneratian_emperor_target
		set_ruler_flag = is_eneratian_emperor_flag
	}
	add_country_modifier = {
		name = eneratian_emperorship
		duration = -1
	}
}

remove_ruler_eneratian_emperorship = {
	hidden_effect = {
		clear_global_event_target = eneratian_emperor_target
		clr_ruler_flag = is_eneratian_emperor_flag
	}
	remove_country_modifier = eneratian_emperorship
}

form_horde_federation_effect = {
	trigger_switch = {
		on_trigger = primary_culture
		onerkan = {
			change_tag = KAR
		}
		cyromeids = {
			change_tag = CYR
		}
		mamerians = {
			change_tag = MAM
		}
		sasemite = {
			change_tag = RID
		}
		ebigeizu = {
			change_tag = BEL
		}
		morasari = {
			change_tag = MOR
		}
		cirenii = {
			change_tag = CIR
		}
	}
	on_change_tag_effect = yes
}

become_great_dynasty_effect = {
	trigger_switch = {
		on_trigger = tag
		ZHE = { override_country_name = GREAT_ZHE }
		XIE = { override_country_name = GREAT_XIE }
		GUI = { override_country_name = GREAT_GUI }
		TOG = { override_country_name = GREAT_TOG }
		XUN = { override_country_name = GREAT_XUN }
		GAO = { override_country_name = GREAT_GAO }
		JIA = { override_country_name = GREAT_JIA }
		LIN = { override_country_name = GREAT_LIN }
		HNS = { override_country_name = GREAT_HNS }
		CAI = { override_country_name = GREAT_CAI }
		MMM = { override_country_name = GREAT_MMM }
		#
		DAA = { override_country_name = GREAT_DAA }
		LAA = { override_country_name = GREAT_LAA }
		YAU = { override_country_name = GREAT_YAU }
		UET = { override_country_name = GREAT_UET }
		TSU = { override_country_name = GREAT_TSU }
		FUN = { override_country_name = GREAT_FUN }
		SUU = { override_country_name = GREAT_SUU }
		ZUE = { override_country_name = GREAT_ZUE }
		YEU = { override_country_name = GREAT_YEU }
		HAK = { override_country_name = GREAT_HAK }
		ZOE = { override_country_name = GREAT_ZOE }
		MAN = { override_country_name = GREAT_MAN }
	}
	set_country_flag = has_overriden_name_flag
}

tribe_tech_group_change_effect = {
	
	if = {
		limit = {
			technology_group = nomad_group
			OR = {
				religion_group = hestani
				secondary_religion = nahitar
				secondary_religion = kausali
				secondary_religion = rah_jadid
				secondary_religion = uttarian
			}
		}
		change_technology_group = ottoman
		change_unit_type = ottoman
	}
	if = {
		limit = {
			technology_group = nomad_group
			religion_group = anhativaz
		}
		change_technology_group = eastern
		change_unit_type = eastern
	}
	if = {
		limit = {
			technology_group = nomad_group
			religion_group = saelian
		}
		change_technology_group = western
		change_unit_type = western
	}
	if = {
		limit = {
			technology_group = nomad_group
			religion = chantlian_pantheon
		}
		change_technology_group = north_american
		change_unit_type = north_american
	}
	if = {
		limit = {
			technology_group = nomad_group
			OR = {
				religion_group = samadian
				secondary_religion = samgharsahi
				secondary_religion = otigari
			}
		}
		change_technology_group = indian
		change_unit_type = indian
	}
	if = {
		limit = {
			technology_group = nomad_group
			religion = achiqnay
		}
		change_technology_group = andean
		change_unit_type = andean
	}
	if = {
		limit = {
			technology_group = nomad_group
			OR = {
				religion_group = wasichantlian
			}
		}
		change_technology_group = mesoamerican
		change_unit_type = mesoamerican
	}
	if = {
		limit = {
			technology_group = nomad_group
			religion = dreamtime
		}
		change_technology_group = aboriginal_tech
		change_unit_type = aboriginal_tech
	}
	if = {
		limit = {
			technology_group = nomad_group
			NOT = { religion_group = anhativaz }
			NOT = { religion_group = saelian }
			NOT = { religion_group = hestani }
			NOT = { religion_group = samadian }
			NOT = { secondary_religion = kausali }
			NOT = { secondary_religion = shiite }
			NOT = { secondary_religion = ibadi }
			NOT = { religion = chantlian_pantheon }
			NOT = { religion = achiqnay }
			NOT = { religion_group = wasichantlian }
			NOT = { religion = dreamtime }
		}
		change_technology_group = chinese
		change_unit_type = chinese
	}
}

enable_changing_schools = {
	custom_tooltip = enable_changing_schools_tt
	hidden_effect = { set_country_flag = can_change_schools }
}
disable_changing_schools = {
	custom_tooltip = disable_changing_schools_tt
	hidden_effect = { clr_country_flag = can_change_schools }
}